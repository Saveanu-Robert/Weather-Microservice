{{- if not .Values.secrets.weatherApiKey }}
{{- fail "ERROR: secrets.weatherApiKey is required! Set it via --set secrets.weatherApiKey=YOUR_KEY or use external secret management. Get a free key at https://www.weatherapi.com/" }}
{{- end }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "weatherspring.fullname" . }}
  labels:
    {{- include "weatherspring.labels" . | nindent 4 }}
type: Opaque
data:
  # Weather API key (base64 encoded)
  weather-api-key: {{ .Values.secrets.weatherApiKey | b64enc | quote }}
  # Database credentials (base64 encoded)
  db-username: {{ .Values.secrets.database.username | b64enc | quote }}
  db-password: {{ .Values.secrets.database.password | b64enc | quote }}
